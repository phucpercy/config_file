(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{209:function(e,o,n){(function(e){(function(o){"use strict";const n=Object.prototype.hasOwnProperty;function t(e){return"object"==typeof e&&null!==e}function r(e,o){return n.call(e,o)}function i(e,o){return n.call(e,o)&&t(e[o])}function a(e,o){return n.call(e,o)&&"string"==typeof e[o]}function s(e,o){return e.length<124?e:o}const c="graphql-transport-ws";var l,d;function p(e){if(t(e)){if(!a(e,"type"))return!1;switch(e.type){case o.MessageType.ConnectionInit:return!r(e,"payload")||void 0===e.payload||t(e.payload);case o.MessageType.ConnectionAck:case o.MessageType.Ping:case o.MessageType.Pong:return!r(e,"payload")||void 0===e.payload||t(e.payload);case o.MessageType.Subscribe:return a(e,"id")&&i(e,"payload")&&(!r(e.payload,"operationName")||void 0===e.payload.operationName||null===e.payload.operationName||"string"==typeof e.payload.operationName)&&a(e.payload,"query")&&(!r(e.payload,"variables")||void 0===e.payload.variables||null===e.payload.variables||i(e.payload,"variables"))&&(!r(e.payload,"extensions")||void 0===e.payload.extensions||null===e.payload.extensions||i(e.payload,"extensions"));case o.MessageType.Next:return a(e,"id")&&i(e,"payload");case o.MessageType.Error:return a(e,"id")&&(n=e.payload,Array.isArray(n)&&n.length>0&&n.every((e=>"message"in e)));case o.MessageType.Complete:return a(e,"id");default:return!1}}var n;return!1}function u(e,o){if(p(e))return e;if("string"!=typeof e)throw new Error("Message not parsable");const n=JSON.parse(e,o);if(!p(n))throw new Error("Invalid message");return n}function y(e,o){if(!p(e))throw new Error("Cannot stringify invalid message");return JSON.stringify(e,o)}function g(e){return t(e)&&"code"in e&&"reason"in e}o.CloseCode=void 0,(l=o.CloseCode||(o.CloseCode={}))[l.InternalServerError=4500]="InternalServerError",l[l.InternalClientError=4005]="InternalClientError",l[l.BadRequest=4400]="BadRequest",l[l.BadResponse=4004]="BadResponse",l[l.Unauthorized=4401]="Unauthorized",l[l.Forbidden=4403]="Forbidden",l[l.SubprotocolNotAcceptable=4406]="SubprotocolNotAcceptable",l[l.ConnectionInitialisationTimeout=4408]="ConnectionInitialisationTimeout",l[l.ConnectionAcknowledgementTimeout=4504]="ConnectionAcknowledgementTimeout",l[l.SubscriberAlreadyExists=4409]="SubscriberAlreadyExists",l[l.TooManyInitialisationRequests=4429]="TooManyInitialisationRequests",o.MessageType=void 0,(d=o.MessageType||(o.MessageType={})).ConnectionInit="connection_init",d.ConnectionAck="connection_ack",d.Ping="ping",d.Pong="pong",d.Subscribe="subscribe",d.Next="next",d.Error="error",d.Complete="complete",o.GRAPHQL_TRANSPORT_WS_PROTOCOL=c,o.createClient=function(n){const{url:t,connectionParams:r,lazy:i=!0,onNonLazyError:a=console.error,lazyCloseTimeout:l=0,keepAlive:d=0,disablePong:p,connectionAckWaitTimeout:f=0,retryAttempts:m=5,retryWait:C=async function(e){let o=1e3;for(let n=0;n<e;n++)o*=2;await new Promise((e=>setTimeout(e,o+Math.floor(2700*Math.random()+300))))},isFatalConnectionProblem:w=(e=>!g(e)),on:b,webSocketImpl:v,generateID:x=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const o=16*Math.random()|0;return("x"==e?o:3&o|8).toString(16)}))},jsonMessageReplacer:T,jsonMessageReviver:M}=n;let h;if(v){if(!("function"==typeof(S=v)&&"constructor"in S&&"CLOSED"in S&&"CLOSING"in S&&"CONNECTING"in S&&"OPEN"in S))throw new Error("Invalid WebSocket implementation provided");h=v}else"undefined"!=typeof WebSocket?h=WebSocket:void 0!==e?h=e.WebSocket||e.MozWebSocket:"undefined"!=typeof window&&(h=window.WebSocket||window.MozWebSocket);var S;if(!h)throw new Error("WebSocket implementation missing");const E=h,N=(()=>{const e=(()=>{const e={};return{on:(o,n)=>(e[o]=n,()=>{delete e[o]}),emit(o){var n;"id"in o&&(null===(n=e[o.id])||void 0===n||n.call(e,o))}}})(),o={connecting:(null==b?void 0:b.connecting)?[b.connecting]:[],opened:(null==b?void 0:b.opened)?[b.opened]:[],connected:(null==b?void 0:b.connected)?[b.connected]:[],ping:(null==b?void 0:b.ping)?[b.ping]:[],pong:(null==b?void 0:b.pong)?[b.pong]:[],message:(null==b?void 0:b.message)?[e.emit,b.message]:[e.emit],closed:(null==b?void 0:b.closed)?[b.closed]:[],error:(null==b?void 0:b.error)?[b.error]:[]};return{onMessage:e.on,on(e,n){const t=o[e];return t.push(n),()=>{t.splice(t.indexOf(n),1)}},emit(e,...n){for(const t of[...o[e]])t(...n)}}})();function I(e){const o=[N.on("error",(n=>{o.forEach((e=>e())),e(n)})),N.on("closed",(n=>{o.forEach((e=>e())),e(n)}))]}let P,k=0,A=!1,O=0,R=!1;async function W(){const[e,n]=await(null!=P?P:P=new Promise(((e,n)=>(async()=>{if(A){if(await C(O),!k)return P=void 0,n({code:1e3,reason:"All Subscriptions Gone"});O++}N.emit("connecting");const i=new E("function"==typeof t?await t():t,c);let a,l;function g(){isFinite(d)&&d>0&&(clearTimeout(l),l=setTimeout((()=>{i.readyState===E.OPEN&&(i.send(y({type:o.MessageType.Ping})),N.emit("ping",!1,void 0))}),d))}I((e=>{P=void 0,clearTimeout(a),clearTimeout(l),n(e)})),i.onerror=e=>N.emit("error",e),i.onclose=e=>N.emit("closed",e),i.onopen=async()=>{try{N.emit("opened",i);const e="function"==typeof r?await r():r;i.send(y(e?{type:o.MessageType.ConnectionInit,payload:e}:{type:o.MessageType.ConnectionInit},T)),isFinite(f)&&f>0&&(a=setTimeout((()=>{i.close(o.CloseCode.ConnectionAcknowledgementTimeout,"Connection acknowledgement timeout")}),f)),g()}catch(e){N.emit("error",e),i.close(o.CloseCode.InternalClientError,s(e instanceof Error?e.message:new Error(e).message,"Internal client error"))}};let m=!1;i.onmessage=({data:n})=>{try{const t=u(n,M);if(N.emit("message",t),"ping"===t.type||"pong"===t.type)return N.emit(t.type,!0,t.payload),void("pong"===t.type?g():p||(i.send(y(t.payload?{type:o.MessageType.Pong,payload:t.payload}:{type:o.MessageType.Pong})),N.emit("pong",!1,t.payload)));if(m)return;if(t.type!==o.MessageType.ConnectionAck)throw new Error(`First message cannot be of type ${t.type}`);clearTimeout(a),m=!0,N.emit("connected",i,t.payload),A=!1,O=0,e([i,new Promise(((e,o)=>I(o)))])}catch(e){i.onmessage=null,N.emit("error",e),i.close(o.CloseCode.BadResponse,s(e instanceof Error?e.message:new Error(e).message,"Bad response"))}}})())));e.readyState===E.CLOSING&&await n;let i=()=>{};const a=new Promise((e=>i=e));return[e,i,Promise.race([a.then((()=>{if(!k){const o=()=>e.close(1e3,"Normal Closure");isFinite(l)&&l>0?setTimeout((()=>{k||e.readyState!==E.OPEN||o()}),l):o()}})),n])]}function q(e){if(g(e)&&(n=e.code,![1e3,1001,1006,1005,1012,1013,1013].includes(n)&&n>=1e3&&n<=1999||[o.CloseCode.InternalServerError,o.CloseCode.InternalClientError,o.CloseCode.BadRequest,o.CloseCode.BadResponse,o.CloseCode.Unauthorized,o.CloseCode.SubprotocolNotAcceptable,o.CloseCode.SubscriberAlreadyExists,o.CloseCode.TooManyInitialisationRequests].includes(e.code)))throw e;var n;if(R)return!1;if(g(e)&&1e3===e.code)return k>0;if(!m||O>=m)throw e;if(w(e))throw e;return A=!0}return i||(async()=>{for(k++;;)try{const[,,e]=await W();await e}catch(e){try{if(!q(e))return}catch(e){return null==a?void 0:a(e)}}})(),{on:N.on,subscribe(e,n){const t=x();let r=!1,i=!1,a=()=>{k--,r=!0};return(async()=>{for(k++;;)try{const[s,c,l]=await W();if(r)return c();const d=N.onMessage(t,(e=>{switch(e.type){case o.MessageType.Next:return void n.next(e.payload);case o.MessageType.Error:return i=!0,r=!0,n.error(e.payload),void a();case o.MessageType.Complete:return r=!0,void a()}}));return s.send(y({id:t,type:o.MessageType.Subscribe,payload:e},T)),a=()=>{r||s.readyState!==E.OPEN||s.send(y({id:t,type:o.MessageType.Complete},T)),k--,r=!0,c()},void await l.finally(d)}catch(e){if(!q(e))return}})().then((()=>{i||n.complete()})).catch((e=>{n.error(e)})),()=>{r||a()}},async dispose(){if(R=!0,P){const[e]=await P;e.close(1e3,"Normal Closure")}}}},o.isMessage=p,o.parseMessage=u,o.stringifyMessage=y,Object.defineProperty(o,"__esModule",{value:!0})})(o)}).call(this,n(128))},215:function(e,o,n){"use strict";n.r(o),n.d(o,"subscriptionClient",(function(){return r}));var t=n(209);const r=Object(t.createClient)({url:"wss://subs.daily.dev/graphql",lazy:!1})}}]);